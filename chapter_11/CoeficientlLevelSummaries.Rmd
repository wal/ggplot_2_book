---
title: "Coefficient Level Summaries"
output: html_notebook
---

```{r}
library(tidyverse)
library(broom)
```


```{r}
models <- txhousing %>%
  group_by(city) %>%
  do(mod = lm(
    log(sales) ~ factor(month),
    data = .,
    na.action = na.exclude
)) 

models
```

The model fit summaries suggest that there are some important differences in seasonality between the different cities. 

```{r}
coefs <- models %>% tidy(mod)
coefs
```
The Month effect

```{r}
months <- coefs %>%
  filter(grepl("factor", term)) %>%
  tidyr::extract(term, "month", "(\\d+)", convert = TRUE)
months

ggplot(months, aes(month, exp(estimate))) + geom_line(aes(group = city))

```

```{r}
coef_sum <- months %>%
  group_by(city) %>%
  summarise(max = max(estimate))
ggplot(coef_sum, aes(max, reorder(city, max))) +
  geom_point()
```

